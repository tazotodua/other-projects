<!-- VIEW DEMO: http://rawgit.com/tazotodua/targmne-com-translation-frame/master/index.html -->

Here is a sample text. select any word and you will see the translation window for it.

(to use this function on any site, then drag and save this 
<a href="javascript:(function(){var mousePos;var lastmousePos;var once_alerted=false;var lastTEXT;var LastSelectionCycledText;document.onmousemove=handleMouseMove;function handleMouseMove(event){var dot,eventDoc,doc,body,pageX,pageY;event=event||window.event;if(event.pageX==null&&event.clientX!=null){eventDoc=(event.target&&event.target.ownerDocument)||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}mousePos={x:event.pageX,y:event.pageY};if(lastmousePos!=mousePos){lastmousePos=mousePos}}setInterval(getSelectionHtml,400);function getSelectionHtml(){once_alerted=false;var finalCONTENT='';if(typeof window.getSelection!='undefined'){var sel=window.getSelection();if(sel.rangeCount){var container=document.createElement('div');for(var i=0,len=sel.rangeCount;i<len;++i){container.appendChild(sel.getRangeAt(i).cloneContents())}finalCONTENT=container.innerHTML}}else if(typeof document.selection!='undefined'){if(document.selection.type=='Text'){finalCONTENT=document.selection.createRange().htmlText}}if(finalCONTENT!=lastTEXT&&finalCONTENT.length>0&&finalCONTENT==LastSelectionCycledText){lastTEXT=finalCONTENT;var MousePos=mousePos;if(!once_alerted){once_alerted=true;create_targme_div(MousePos.x,MousePos.y,finalCONTENT)}}LastSelectionCycledText=finalCONTENT}window.removeiframe=function(){var headerDIVV=document.getElementById('myTargmneFrame');if(headerDIVV){headerDIVV.parentNode.removeChild(headerDIVV)}};function create_targme_div(x,y,targetTEXT){removeiframe();DIvFrame=document.createElement('div');DIvFrame.id='myTargmneFrame';var FinalStylee='opacity:0.9;position:absolute;overflow:hidden;border:1px solid;left:0px;top:'+parseInt(y+32)+'px;width:470px;height:500px;';DIvFrame.setAttribute('style',FinalStylee);var firstContent='<iframe src=\'//www.targmne.com/home/sw/'+targetTEXT+'\' style=\'width:800px;height:1100px;position:absolute;top:-550px;left:-330px;\' ></iframe><a style=\'position:absolute;left:92%;font-size:3em;background-color:red;padding:4px;\' href=\'javascript:removeiframe();\'>X</a>';var secondContent='<iframe src=\'//www.targmne.com/free_service_ff/?tw=500#'+targetTEXT+'\' style=\'width:800px;height:900px;position:absolute;top:-5px;left:-5px;\' ></iframe><a style=\'position:absolute;left:92%;font-size:3em;background-color:red;padding:3px;\' href=\'javascript:removeiframe();\'>X</a>';DIvFrame.innerHTML=firstContent;document.body.appendChild(DIvFrame)}})();">TargmneCom_Bookmarklet_1</a> into your bookmarks toolbar, and when you click that, the translating function will be activated on your page. Then, just select any text and translation window will be opened).


<br/><br/>p.s.
<br/>1) If you dont know what is <b>Bookmark Bar</b>, then see <a href="http://www.otaxi.pvt.ge/2013/08/programebi.html#bookmark_bar" target="_blank">Instruction</a>;
<br/>2) This script doesnt work on every site(for example, on HTTPS:// websites. so , change HTTPS to HTTP every time, to use this script)! 
<br/>3) if you want that compact IFRAME was shown instead of the  main page of targmne.com, then replace  use this <a href="javascript:(function(){var mousePos;var lastmousePos;var once_alerted=false;var lastTEXT;var LastSelectionCycledText;document.onmousemove=handleMouseMove;function handleMouseMove(event){var dot,eventDoc,doc,body,pageX,pageY;event=event||window.event;if(event.pageX==null&&event.clientX!=null){eventDoc=(event.target&&event.target.ownerDocument)||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}mousePos={x:event.pageX,y:event.pageY};if(lastmousePos!=mousePos){lastmousePos=mousePos}}setInterval(getSelectionHtml,400);function getSelectionHtml(){once_alerted=false;var finalCONTENT='';if(typeof window.getSelection!='undefined'){var sel=window.getSelection();if(sel.rangeCount){var container=document.createElement('div');for(var i=0,len=sel.rangeCount;i<len;++i){container.appendChild(sel.getRangeAt(i).cloneContents())}finalCONTENT=container.innerHTML}}else if(typeof document.selection!='undefined'){if(document.selection.type=='Text'){finalCONTENT=document.selection.createRange().htmlText}}if(finalCONTENT!=lastTEXT&&finalCONTENT.length>0&&finalCONTENT==LastSelectionCycledText){lastTEXT=finalCONTENT;var MousePos=mousePos;if(!once_alerted){once_alerted=true;create_targme_div(MousePos.x,MousePos.y,finalCONTENT)}}LastSelectionCycledText=finalCONTENT}window.removeiframe=function(){var headerDIVV=document.getElementById('myTargmneFrame');if(headerDIVV){headerDIVV.parentNode.removeChild(headerDIVV)}};function create_targme_div(x,y,targetTEXT){removeiframe();DIvFrame=document.createElement('div');DIvFrame.id='myTargmneFrame';var FinalStylee='opacity:0.9;position:absolute;overflow:hidden;border:1px solid;left:0px;top:'+parseInt(y+32)+'px;width:470px;height:500px;';DIvFrame.setAttribute('style',FinalStylee);var firstContent='<iframe src=\'//www.targmne.com/home/sw/'+targetTEXT+'\' style=\'width:800px;height:1100px;position:absolute;top:-550px;left:-330px;\' ></iframe><a style=\'position:absolute;left:92%;font-size:3em;background-color:red;padding:4px;\' href=\'javascript:removeiframe();\'>X</a>';var secondContent='<iframe src=\'//www.targmne.com/free_service_ff/?tw=500#'+targetTEXT+'\' style=\'width:800px;height:900px;position:absolute;top:-5px;left:-5px;\' ></iframe><a style=\'position:absolute;left:92%;font-size:3em;background-color:red;padding:3px;\' href=\'javascript:removeiframe();\'>X</a>';DIvFrame.innerHTML=secondContent;document.body.appendChild(DIvFrame)}})();">TargmneCom_Bookmarklet_2</a>]







<!-- full raw function. minify with http://minifyjavascript.com -->
<script type="text/javascript">
(function() {
    var mousePos;
	var lastmousePos;
	var once_alerted=false;
	var lastTEXT;
	var LastSelectionCycledText;

	
    document.onmousemove = handleMouseMove;
    function handleMouseMove(event) 
	{
        var dot, eventDoc, doc, body, pageX, pageY;

        event = event || window.event; // IE-ism

        // If pageX/Y aren't available and clientX/Y are,
        // calculate pageX/Y - logic taken from jQuery.
        // (This is to support old IE)
        if (event.pageX == null && event.clientX != null) {
            eventDoc = (event.target && event.target.ownerDocument) || document;
            doc = eventDoc.documentElement;
            body = eventDoc.body;

            event.pageX = event.clientX +
              (doc && doc.scrollLeft || body && body.scrollLeft || 0) -
              (doc && doc.clientLeft || body && body.clientLeft || 0);
            event.pageY = event.clientY +
              (doc && doc.scrollTop  || body && body.scrollTop  || 0) -
              (doc && doc.clientTop  || body && body.clientTop  || 0 );
        }

        mousePos = {
            x: event.pageX,
            y: event.pageY
        };
		
		if (lastmousePos != mousePos) 
		{
			lastmousePos = mousePos;
		}
    }
	
	
	

	setInterval(getSelectionHtml, 400); // setInterval repeats every X ms
	function getSelectionHtml()
	{
		once_alerted=false;
		var finalCONTENT = '';
		if (typeof window.getSelection != 'undefined') {
			var sel = window.getSelection();
			if (sel.rangeCount) {
				var container = document.createElement('div');
				for (var i = 0, len = sel.rangeCount; i < len; ++i) {
					container.appendChild(sel.getRangeAt(i).cloneContents());
				}
				finalCONTENT = container.innerHTML;
			}
		} else if (typeof document.selection != 'undefined') {
			if (document.selection.type == 'Text') {
				finalCONTENT = document.selection.createRange().htmlText;
			}
		}

		if (
			finalCONTENT!=lastTEXT	&& 	//if new word is selected
			finalCONTENT.length>0	&&	//if it not empty
			finalCONTENT==LastSelectionCycledText	// wait 1cycle again( to ensure that selection is finished, and not the middle process)
			) 
			{
			lastTEXT=finalCONTENT;
			var MousePos = mousePos;
			if (!once_alerted)
				{
				once_alerted =true;
				create_targme_div(MousePos.x, MousePos.y ,  finalCONTENT);
				}
			}
		LastSelectionCycledText=finalCONTENT;
		//return finalCONTENT;
	}
	
	
	window.removeiframe =function()
	{
		var headerDIVV = document.getElementById('myTargmneFrame');
		if (headerDIVV) {	headerDIVV.parentNode.removeChild(headerDIVV);}
	};
		
	function create_targme_div(x,y,  targetTEXT)
	{
		removeiframe();
		DIvFrame = document.createElement('div');
		DIvFrame.id = 'myTargmneFrame';
		var FinalStylee= 'opacity:0.9;position:absolute;overflow:hidden;border:1px solid;left:0px;top:' + parseInt(y +32) + 'px;width:470px;height:500px;';
		DIvFrame.setAttribute('style',FinalStylee);
		var firstContent= '<iframe src=\'//www.targmne.com/home/sw/'+targetTEXT+'\' style=\'width:800px;height:1100px;position:absolute;top:-550px;left:-330px;\' ></iframe><a style=\'position:absolute;left:92%;font-size:3em;background-color:red;padding:4px;\' href=\'javascript:removeiframe();\'>X</a>';
		var secondContent = '<iframe src=\'//www.targmne.com/free_service_ff/?tw=500#'+targetTEXT+'\' style=\'width:800px;height:900px;position:absolute;top:-5px;left:-5px;\' ></iframe><a style=\'position:absolute;left:92%;font-size:3em;background-color:red;padding:3px;\' href=\'javascript:removeiframe();\'>X</a>';
		DIvFrame.innerHTML = firstContent;
		document.body.appendChild(DIvFrame);
	}
})();
</script>
